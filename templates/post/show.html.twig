{% extends 'base.html.twig' %}


{% set titleParts = post.title|split(':', 2) %}
{% set multiTitle = titleParts|length > 1 %}

{% block pageheader %}
    {% if is_granted('ROLE_BLOG_ADMIN') %}
        <div class="btn-toolbar">
            <div class="btn-group pull-right">
                <a href="{{ path('nines_blog_post_index') }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-left"></span> Back
                </a>
                <a href="{{ path('nines_blog_post_edit', { 'id': post.id }) }}" class="btn btn-default">
                    <span class='glyphicon glyphicon-edit'></span> Edit
                </a>
                <a href="{{ path('nines_blog_post_delete', { 'id': post.id }) }}" class="btn btn-default" data-confirm="Are you sure you want to delete this Post?">
                    <span class='glyphicon glyphicon-remove'></span> Delete
                </a>
            </div>
        </div>
        <div class="clearfix"></div>
    {% endif %}

    <h1>{{ titleParts[0] }}{% if multiTitle %}:{% endif %}</h1>
    {% if multiTitle %}
        <h2>{{ titleParts[1] }}</h2>
    {% endif %}
{% endblock %}

{% block body %}
    <div class="excerpt hidden">
        {{ post.excerpt|raw }}
    </div>
    <div class="blog-content">
        {{ post.content|raw }}
    </div>

    <h2>PDFs</h2>
    {% if is_granted('ROLE_CONTENT_ADMIN') %}
        <div class='btn-toolbar pull-right'>
            <div class='btn-group'>
                <a href="{{ path('post_new_pdf', {'id': post.id }) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-plus"></span> Add Pdf </a>
            </div>
        </div>
        <div class='clearfix'></div>
    {% endif %}
    {% embed '@NinesMedia/pdf/ui/list.html.twig' with {
        'container': post,
        'path_delete': 'post_delete_pdf',
        'path_edit': 'post_edit_pdf',
    } %}
    {% endembed %}


{% endblock %}
